'use strict';var e,f="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,h="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function l(a,b){if(b){var c=f;a=a.split(".");for(var d=0;d<a.length-1;d++){var g=a[d];g in c||(c[g]={});c=c[g]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&h(c,a,{configurable:!0,writable:!0,value:b})}}
l("Array.prototype.findIndex",function(a){return a?a:function(a,c){a:{var b=this;b instanceof String&&(b=String(b));for(var g=b.length,k=0;k<g;k++)if(a.call(c,b[k],k,b)){a=k;break a}a=-1}return a}});var m="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(a[g]=d[g])}return a};l("Object.assign",function(a){return a||m});function n(a,b){var c=this;this.a={};this.options=b;console.log(this.a);this.g=[];this.data=this.a.data;this.j=a;this.c="";this.b=-1;this.i=!1;p(this.j);this.h=document.createElement("input");this.h.setAttribute("class","ac-input");this.h.setAttribute("placeHolder",this.a.placeHolder);this.j.appendChild(this.h);[["input",this.l],["click",this.u],["keydown",this.v],["blur",this.s]].map(function(a){return c.h.addEventListener(a[0],a[1].bind(c))});this.f=document.createElement("div");this.f.style.maxHeight=
this.a.maxHeight+"px";this.f.setAttribute("class","ac-items");this.j.appendChild(this.f);this.f.addEventListener("mousedown",this.w.bind(this))}e=n.prototype;e.l=function(){this.c=this.h.value.toLowerCase();this.close();this.c.length<this.a.minChars||!1===this.a.open&&this.f.childElementCount||q(this).map(this.m,this)};
e.m=function(a){var b=this,c=document.createElement("div");if(this.a.highlight){var d=a[this.a.labelField].toLowerCase().indexOf(this.c);c.innerHTML=a[this.a.labelField].slice(0,d)+'<font color="#FF9400">'+a[this.a.labelField].slice(d,d+this.c.length)+"</font>"+a[this.a.labelField].slice(d+this.c.length,a[this.a.labelField].length)}else c.innerHTML=a[this.a.labelField];c.setAttribute("data-value",this.g.findIndex(function(c){return c[b.a.labelField]==a[b.a.labelField]}));c.addEventListener("click",
this.o.bind(this));this.f.appendChild(c)};function q(a){return a.g.filter(function(b){return-1!=b[a.a.searchField].toLowerCase().indexOf(a.c)})}e.o=function(a){a=this.g[a.target.getAttribute("data-value")];this.h.value=a[this.a.labelField];this.c=this.h.value.toLowerCase();this.a.onSelect(a[this.a.dataField]);this.i=!1;this.close()};e.u=function(){this.close();!0===this.a.open&&""==this.c?this.g.map(this.m,this):this.l(null)};
e.v=function(a){var b=this.f.childNodes;-1!=[40,38,13,27].indexOf(a.keyCode)&&a.preventDefault();40==a.keyCode?(-1==this.b&&this.l(null),this.b++,this.active(b)):38==a.keyCode?(this.b--,this.active(b)):13==a.keyCode?-1!=this.b?b[this.b].click():this.close():27==a.keyCode&&this.close()};e.s=function(){this.i||this.close()};e.w=function(){this.i=!0};
e.active=function(a){if(a.length){for(var b=0,c=a.length;b<c;b++)a[b].classList.remove("ac-active");this.b=0>this.b?a.length-1:this.b>a.length-1?0:this.b;a[this.b].classList.add("ac-active");a[this.b].scrollIntoView()}};e.close=function(){this.b=-1;p(this.f)};function p(a){for(;a.firstChild;)a.removeChild(a.firstChild)}
f.Object.defineProperties(n.prototype,{value:{configurable:!0,enumerable:!0,set:function(a){this.h.value=a;this.c=a.toLowerCase()},get:function(){var a=this,b=this.g.findIndex(function(b){return b[a.a.labelField].toLowerCase()==a.c});return-1!=b?this.g[b][this.a.dataField]:null}},input:{configurable:!0,enumerable:!0,get:function(){return this.h}},box:{configurable:!0,enumerable:!0,get:function(){return this.f}},data:{configurable:!0,enumerable:!0,set:function(a){""==this.a.searchField?(this.g=a.map(function(a){return{text:a}}),
this.a.labelField=this.a.searchField=this.a.dataField="text"):this.g=a;this.a.searchField!=this.a.labelField&&(this.a.highlight=!1)},get:function(){return this.g}},options:{configurable:!0,enumerable:!0,set:function(a){this.a=Object.assign.apply(this,[{placeHolder:"",open:!1,highlight:!0,maxHeight:500,minChars:3,labelField:"",searchField:"",dataField:"",data:[],onSelect:function(){}},a])}}});var r=["AutoComplete"],t=this;r[0]in t||"undefined"==typeof t.execScript||t.execScript("var "+r[0]);
for(var u;r.length&&(u=r.shift());){var v;if(v=!r.length)v=void 0!==n;v?t[u]=n:t[u]&&t[u]!==Object.prototype[u]?t=t[u]:t=t[u]={}};
