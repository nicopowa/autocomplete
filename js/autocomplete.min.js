/*

The Closure Library Authors - Apache-2.0
*/
(function(){
'use strict';var e,f="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function g(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var h=g(this),k;
if("function"==typeof Object.setPrototypeOf)k=Object.setPrototypeOf;else{var l;a:{var m={a:!0},n={};try{n.__proto__=m;l=n.a;break a}catch(a){}l=!1}k=l?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var p=k,q=this||self;function r(a,b){a=a.split(".");var c=q;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};function t(a,b){this.g=this.A(b);this.g.o=this.g.o.map(function(d,B){return Object.assign({},d,{s:B})});this.u=a;this.i="";this.m=this.s=-1;this.H=!1;this.u.classList.add("ac");this.h=document.createElement("input");this.h.setAttribute("type","search");this.g.required&&this.h.setAttribute("required","");this.g.filter||this.h.setAttribute("data-readonly","");this.h.setAttribute("placeholder",this.g.U);this.u.appendChild(this.h);this.g.value&&(this.value=this.g.value);this.j=document.createElement("div");
this.j.style.maxHeight="220px";this.j.classList.add("ac-items");this.u.appendChild(this.j);a={input:this.v,click:this.S,keydown:this.J,blur:this.R};for(var c in a)this.h.addEventListener(c,a[c].bind(this));this.j.addEventListener("mousedown",this.T.bind(this))}e=t.prototype;e.v=function(){this.i=this.h.value.toLowerCase();u(this);if(this.g.L||!(this.i.length<this.g.I||this.j.childElementCount))this.filter().map(this.K,this),this.g.v(this.i)};
e.K=function(a){var b=document.createElement("div");b.innerHTML=this.g.C?this.C(a[this.g.l]):a[this.g.l];b.setAttribute("data-value",a.s);b.addEventListener("click",this.F.bind(this));this.j.appendChild(b)};e.filter=function(){var a=this;return this.g.o.filter(function(b){return-1!=b[a.g.P].toLowerCase().indexOf(a.i)||!a.g.filter})};
e.C=function(a){var b=a.toLowerCase().indexOf(this.i),c=document.createElement("span");c.innerHTML=a.slice(b,b+this.i.length);return a.slice(0,b)+c.outerHTML+a.slice(b+this.i.length,a.length)};e.F=function(a){a=a.target.getAttribute("data-value");var b=this.g.o[a];this.h.value=b[this.g.l];this.i=this.h.value.toLowerCase();this.s=a;this.H=!1;u(this);this.g.O(b[this.g.G],b,a)};e.S=function(){if(this.j.childElementCount)return u(this);this.g.L&&!this.i?this.g.o.map(this.K,this):this.v(null)};
e.J=function(a){var b=this.j.childNodes;-1==[40,38,13,27].indexOf(a.keyCode)&&this.g.filter||a.preventDefault();switch(a.keyCode){case 40:-1==this.m&&this.v(null);this.m++;v(this,b);break;case 38:this.m--;v(this,b);break;case 13:-1!=this.m?b[this.m].click():(this.g.B?this.h.value.length>=this.g.I&&this.g.O(this.h.value,void 0,-1):1==this.j.childElementCount&&b[0].click(),u(this));break;case 27:u(this)}};e.R=function(){this.H||u(this)};e.T=function(){this.H=!0};
function v(a,b){if(b.length){for(var c=0,d=b.length;c<d;c++)b[c].classList.remove("ac-active");a.m=0>a.m?b.length-1:a.m>b.length-1?0:a.m;b[a.m].classList.add("ac-active");b[a.m].scrollIntoView()}}function u(a){for(a.m=-1;a.j.firstChild;)a.j.removeChild(a.j.firstChild)}
e.A=function(a){return{value:a.value||"",filter:!1!==a.filter,required:a.required||!1,U:a.prompt||"",L:a.open||!1,C:!1!==a.highlight&&a.filter,B:a.custom||!1,V:a.maxHeight||"500px",I:a.minChars||3,l:a.label||"text",P:a.search||"text",G:a.field||"text",o:a.data||[],v:a.onInput||function(){},O:a.onSelect||function(){}}};
h.Object.defineProperties(t.prototype,{value:{configurable:!0,enumerable:!0,set:function(a){var b=this;this.g.B||(this.s=this.g.o.findIndex(function(c){return c[b.g.G]===a}),-1!=this.s&&(a=this.g.o[this.s][this.g.l]));this.h.value=a;this.i=a.toLowerCase()},get:function(){return-1!=this.s?this.g.o[this.s][this.g.G]:this.g.B?this.h.value:null}},data:{configurable:!0,enumerable:!0,set:function(a){this.g.o=a.map(function(b,c){return Object.assign({},b,{s:c})});this.g.P!=this.g.l&&(this.g.C=!1)}},input:{configurable:!0,
enumerable:!0,get:function(){return this.h}},cpl:{configurable:!0,enumerable:!0,get:function(){return this.j}}});r("AutoComplete",t);t.prototype.setOptions=t.prototype.A;function w(a,b){t.call(this,a,b);this.u.classList.add("ac-label");this.labels=[];this.M=[];this.D=document.createElement("div");this.D.classList.add("ac-labels");this.u.insertBefore(this.D,this.h)}w.prototype=f(t.prototype);w.prototype.constructor=w;
if(p)p(w,t);else for(var x in t)if("prototype"!=x)if(Object.defineProperties){var y=Object.getOwnPropertyDescriptor(t,x);y&&Object.defineProperty(w,x,y)}else w[x]=t[x];function z(a,b,c){c=void 0===c?!0:c;var d=document.createElement("div");d.innerHTML=b[a.g.l];a.D.appendChild(d);a.labels.push(b);a.M.push(d);d.addEventListener("click",function(){A(a,b);a.h.focus()});c&&a.g.N(b,a.labels,!0);a.h.focus()}
function A(a,b,c){c=void 0===c?!0:c;b=a.findIndex(b[a.g.l]);a.D.removeChild(a.M.splice(b,1)[0]);b=a.labels.splice(b,1)[0];c&&a.g.N(b,a.labels,!1)}w.prototype.F=function(a){t.prototype.F.call(this,a);a=a.target.getAttribute("data-value");var b=this.g.o[a];a=this.findIndex(b[this.g.l]);-1==a&&z(this,b);this.h.value=this.i=""};
w.prototype.J=function(a){t.prototype.J.call(this,a);8==a.keyCode&&!this.i.length&&this.labels.length&&(a.preventDefault(),this.i=this.h.value=this.labels.slice(-1)[0][this.g.l],A(this,this.labels.slice(-1)[0]));13==a.keyCode&&this.g.B&&this.i.length>=this.g.I&&-1==this.findIndex(this.i)&&(a={},z(this,(a[this.g.l]=this.i,a)),this.h.value=this.i="")};w.prototype.findIndex=function(a){var b=this;return this.labels.findIndex(function(c){return c[b.g.l].toLowerCase()==a.toLowerCase()})};
w.prototype.A=function(a){return Object.assign({},t.prototype.A.call(this,a),{N:a.onLabel||function(){}})};h.Object.defineProperties(w.prototype,{value:{configurable:!0,enumerable:!0,get:function(){return this.labels},set:function(a){for(var b=this;this.labels.length;)A(this,this.labels[0],!1);"string"===typeof a[0]&&(a=a.map(function(c){var d={};return d[b.g.l]=c,d}));a.filter(function(c){return-1==b.findIndex(c[b.g.l])}).forEach(function(c){return z(b,c,!1)})}}});r("AutoCompleteLabel",w);
w.prototype.setOptions=w.prototype.A;}).call(this);
