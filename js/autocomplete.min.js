'use strict';var e,f="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,h="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function l(a,b){if(b){var c=f;a=a.split(".");for(var d=0;d<a.length-1;d++){var g=a[d];g in c||(c[g]={});c=c[g]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&h(c,a,{configurable:!0,writable:!0,value:b})}}
l("Array.prototype.findIndex",function(a){return a?a:function(a,c){a:{var b=this;b instanceof String&&(b=String(b));for(var g=b.length,k=0;k<g;k++)if(a.call(c,b[k],k,b)){a=k;break a}a=-1}return a}});var m="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(a[g]=d[g])}return a};l("Object.assign",function(a){return a||m});function n(a,b){var c=this;this.a={};this.options=b;this.h=[];this.data=this.a.data;this.j=a;this.f="";this.b=-1;this.i=!1;p(this.j);this.c=document.createElement("input");this.c.setAttribute("class","ac-input");this.c.setAttribute("type","search");this.c.setAttribute("placeHolder",this.a.placeHolder);this.j.appendChild(this.c);[["input",this.l],["click",this.u],["keydown",this.v],["blur",this.s]].map(function(a){return c.c.addEventListener(a[0],a[1].bind(c))});this.g=document.createElement("div");
this.g.style.maxHeight=this.a.maxHeight+"px";this.g.setAttribute("class","ac-items");this.j.appendChild(this.g);this.g.addEventListener("mousedown",this.w.bind(this))}e=n.prototype;e.l=function(){this.f=this.c.value.toLowerCase();this.close();!1===this.a.open&&(this.f.length<this.a.minChars||this.g.childElementCount)||q(this).map(this.m,this)};
e.m=function(a){var b=this,c=document.createElement("div");c.innerHTML=this.a.highlight?r(this,a[this.a.labelField]):a[this.a.labelField];c.setAttribute("data-value",this.h.findIndex(function(c){return c[b.a.labelField]==a[b.a.labelField]}));c.addEventListener("click",this.o.bind(this));this.g.appendChild(c)};function q(a){return a.h.filter(function(b){return-1!=b[a.a.searchField].toLowerCase().indexOf(a.f)})}
function r(a,b){var c=b.toLowerCase().indexOf(a.f);return b.slice(0,c)+'<font color="#FF9400">'+b.slice(c,c+a.f.length)+"</font>"+b.slice(c+a.f.length,b.length)}e.o=function(a){a=this.h[a.target.getAttribute("data-value")];this.c.value=a[this.a.labelField];this.f=this.c.value.toLowerCase();this.a.onSelect(a[this.a.dataField]);this.i=!1;this.close()};e.u=function(){this.close();!0===this.a.open&&""==this.f?this.h.map(this.m,this):this.l(null)};
e.v=function(a){var b=this.g.childNodes;-1!=[40,38,13,27].indexOf(a.keyCode)&&a.preventDefault();40==a.keyCode?(-1==this.b&&this.l(null),this.b++,this.active(b)):38==a.keyCode?(this.b--,this.active(b)):13==a.keyCode?-1!=this.b?b[this.b].click():this.close():27==a.keyCode&&this.close()};e.s=function(){this.i||this.close()};e.w=function(){this.i=!0};
e.active=function(a){if(a.length){for(var b=0,c=a.length;b<c;b++)a[b].classList.remove("ac-active");this.b=0>this.b?a.length-1:this.b>a.length-1?0:this.b;a[this.b].classList.add("ac-active");a[this.b].scrollIntoView()}};e.close=function(){this.b=-1;p(this.g)};function p(a){for(;a.firstChild;)a.removeChild(a.firstChild)}
f.Object.defineProperties(n.prototype,{value:{configurable:!0,enumerable:!0,set:function(a){this.c.value=a;this.f=a.toLowerCase()},get:function(){var a=this,b=this.h.findIndex(function(b){return b[a.a.labelField].toLowerCase()==a.f});return-1!=b?this.h[b][this.a.dataField]:null}},input:{configurable:!0,enumerable:!0,get:function(){return this.c}},box:{configurable:!0,enumerable:!0,get:function(){return this.g}},data:{configurable:!0,enumerable:!0,set:function(a){""==this.a.searchField?(this.h=a.map(function(a){return{text:a}}),
this.a.labelField=this.a.searchField=this.a.dataField="text"):this.h=a;this.a.searchField!=this.a.labelField&&(this.a.highlight=!1)},get:function(){return this.h}},options:{configurable:!0,enumerable:!0,set:function(a){Object.assign(this.a,{placeHolder:"",open:!1,highlight:!0,maxHeight:500,minChars:3,labelField:"",searchField:"",dataField:"",data:[],onSelect:function(){}},a)}}});var t=["AutoComplete"],u=this;t[0]in u||"undefined"==typeof u.execScript||u.execScript("var "+t[0]);
for(var v;t.length&&(v=t.shift());){var w;if(w=!t.length)w=void 0!==n;w?u[v]=n:u[v]&&u[v]!==Object.prototype[v]?u=u[v]:u=u[v]={}};
