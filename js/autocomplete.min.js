(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var d;function e(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}return globalThis}var f=e(this),g=this||self;function h(a,b){this.a={};this.D(b);this.o=a;this.g="";this.f=-1;this.m=!1;this.o.classList.add("ac");this.c=document.createElement("input");this.c.setAttribute("type","search");this.c.setAttribute("placeholder",this.a.L);this.o.appendChild(this.c);this.b=document.createElement("div");this.b.style.maxHeight=this.a.G;this.b.classList.add("ac-items");this.o.appendChild(this.b);a={input:this.j,click:this.I,keydown:this.J,blur:this.H};for(var c in a)this.c.addEventListener(c,a[c].bind(this));this.b.addEventListener("mousedown",
this.K.bind(this))}d=h.prototype;d.j=function(){this.g=this.c.value.toLowerCase();k(this);if(this.a.u||!(this.g.length<this.a.A||this.b.childElementCount))this.filter().map(this.s,this),this.a.j(this.g)};d.s=function(a){var b=this,c=document.createElement("div");c.innerHTML=this.a.l?this.l(a[this.a.i]):a[this.a.i];c.setAttribute("data-value",this.a.h.findIndex(function(l){return l[b.a.i]==a[b.a.i]}));c.addEventListener("click",this.F.bind(this));this.b.appendChild(c)};
d.filter=function(){var a=this;return this.a.h.filter(function(b){return-1!=b[a.a.C].toLowerCase().indexOf(a.g)})};d.l=function(a){var b=a.toLowerCase().indexOf(this.g),c=document.createElement("span");c.innerHTML=a.slice(b,b+this.g.length);return a.slice(0,b)+c.outerHTML+a.slice(b+this.g.length,a.length)};d.F=function(a){a=a.target.getAttribute("data-value");var b=this.a.h[a];this.c.value=b[this.a.i];this.g=this.c.value.toLowerCase();this.m=!1;k(this);this.a.B(b[this.a.w],b,a)};
d.I=function(){if(this.b.childElementCount)return k(this);this.a.u&&!this.g?this.a.h.map(this.s,this):this.j(null)};d.J=function(a){var b=this.b.childNodes;-1!=[40,38,13,27].indexOf(a.keyCode)&&a.preventDefault();switch(a.keyCode){case 40:-1==this.f&&this.j(null);this.f++;m(this,b);break;case 38:this.f--;m(this,b);break;case 13:-1!=this.f?b[this.f].click():(this.a.v?this.c.value.length>=this.a.A&&this.a.B(this.c.value,void 0,-1):1==this.b.childElementCount&&b[0].click(),k(this));break;case 27:k(this)}};
d.H=function(){this.m||k(this)};d.K=function(){this.m=!0};function m(a,b){if(b.length){for(var c=0,l=b.length;c<l;c++)b[c].classList.remove("ac-active");a.f=0>a.f?b.length-1:a.f>b.length-1?0:a.f;b[a.f].classList.add("ac-active");b[a.f].scrollIntoView()}}function k(a){for(a.f=-1;a.b.firstChild;)a.b.removeChild(a.b.firstChild)}
d.D=function(a){this.a={L:a.prompt||"",u:a.open||!1,l:a.highlight||!0,v:a.custom||!1,G:a.maxHeight||"500px",A:a.minChars||3,i:a.label||"text",C:a.search||"text",w:a.field||"text",h:a.data||[],j:a.onInput||function(){},B:a.onSelect||function(){}}};
f.Object.defineProperties(h.prototype,{value:{configurable:!0,enumerable:!0,set:function(a){this.c.value=a;this.g=a.toLowerCase()},get:function(){var a=this,b=this.a.h.findIndex(function(c){return c[a.a.i].toLowerCase()==a.g});return-1!=b?this.a.h[b][this.a.w]:this.a.v?this.c.value:null}},data:{configurable:!0,enumerable:!0,set:function(a){this.a.h=a;this.a.C!=this.a.i&&(this.a.l=!1)}},input:{configurable:!0,enumerable:!0,get:function(){return this.c}},cpl:{configurable:!0,enumerable:!0,get:function(){return this.b}}});
var n=["AutoComplete"],p=g;n[0]in p||"undefined"==typeof p.execScript||p.execScript("var "+n[0]);for(var q;n.length&&(q=n.shift());)n.length||void 0===h?p[q]&&p[q]!==Object.prototype[q]?p=p[q]:p=p[q]={}:p[q]=h;h.prototype.setOptions=h.prototype.D;}).call(this);
