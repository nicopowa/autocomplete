(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var e,f="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function g(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var h=g(this),k;
if("function"==typeof Object.setPrototypeOf)k=Object.setPrototypeOf;else{var l;a:{var m={L:!0},n={};try{n.__proto__=m;l=n.L;break a}catch(a){}l=!1}k=l?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var p=k,q=this||self;function r(a,b){a=a.split(".");var c=q;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};function t(a,b){this.a=this.m(b);this.j=a;this.c="";this.h=-1;this.B=!1;this.j.classList.add("ac");this.b=document.createElement("input");this.b.setAttribute("type","search");this.a.required&&this.b.setAttribute("required","");this.a.filter||this.b.setAttribute("data-readonly","");this.b.setAttribute("placeholder",this.a.R);this.j.appendChild(this.b);this.a.value&&(this.value=this.a.value);this.g=document.createElement("div");this.g.style.maxHeight=this.a.M;this.g.classList.add("ac-items");this.j.appendChild(this.g);
a={input:this.l,click:this.O,keydown:this.D,blur:this.N};for(var c in a)this.b.addEventListener(c,a[c].bind(this));this.g.addEventListener("mousedown",this.P.bind(this))}e=t.prototype;e.l=function(){this.c=this.b.value.toLowerCase();u(this);if(this.a.G||!(this.c.length<this.a.C||this.g.childElementCount))this.filter().map(this.F,this),this.a.l(this.c)};
e.F=function(a){var b=this,c=document.createElement("div");c.innerHTML=this.a.u?this.u(a[this.a.f]):a[this.a.f];c.setAttribute("data-value",this.a.i.findIndex(function(d){return d[b.a.f]==a[b.a.f]}));c.addEventListener("click",this.v.bind(this));this.g.appendChild(c)};e.filter=function(){var a=this;return this.a.i.filter(function(b){return-1!=b[a.a.K].toLowerCase().indexOf(a.c)||!a.a.filter})};
e.u=function(a){var b=a.toLowerCase().indexOf(this.c),c=document.createElement("span");c.innerHTML=a.slice(b,b+this.c.length);return a.slice(0,b)+c.outerHTML+a.slice(b+this.c.length,a.length)};e.v=function(a){a=a.target.getAttribute("data-value");var b=this.a.i[a];this.b.value=b[this.a.f];this.c=this.b.value.toLowerCase();this.B=!1;u(this);this.a.J(b[this.a.A],b,a)};e.O=function(){if(this.g.childElementCount)return u(this);this.a.G&&!this.c?this.a.i.map(this.F,this):this.l(null)};
e.D=function(a){var b=this.g.childNodes;-1==[40,38,13,27].indexOf(a.keyCode)&&this.a.filter||a.preventDefault();switch(a.keyCode){case 40:-1==this.h&&this.l(null);this.h++;v(this,b);break;case 38:this.h--;v(this,b);break;case 13:-1!=this.h?b[this.h].click():(this.a.o?this.b.value.length>=this.a.C&&this.a.J(this.b.value,void 0,-1):1==this.g.childElementCount&&b[0].click(),u(this));break;case 27:u(this)}};e.N=function(){this.B||u(this)};e.P=function(){this.B=!0};
function v(a,b){if(b.length){for(var c=0,d=b.length;c<d;c++)b[c].classList.remove("ac-active");a.h=0>a.h?b.length-1:a.h>b.length-1?0:a.h;b[a.h].classList.add("ac-active");b[a.h].scrollIntoView()}}function u(a){for(a.h=-1;a.g.firstChild;)a.g.removeChild(a.g.firstChild)}
e.m=function(a){return{value:a.value||"",filter:!1!==a.filter,required:a.required||!1,R:a.prompt||"",G:a.open||!1,u:!1!==a.highlight&&a.filter,o:a.custom||!1,M:a.maxHeight||"500px",C:a.minChars||3,f:a.label||"text",K:a.search||"text",A:a.field||"text",i:a.data||[],l:a.onInput||function(){},J:a.onSelect||function(){}}};
h.Object.defineProperties(t.prototype,{value:{configurable:!0,enumerable:!0,set:function(a){var b=this;if(!this.a.o){var c=this.a.i.findIndex(function(d){return d[b.a.A]===a});-1!=c&&(a=this.a.i[c][this.a.f])}this.b.value=a;this.c=a.toLowerCase()},get:function(){var a=this,b=this.a.i.findIndex(function(c){return c[a.a.f].toLowerCase()==a.c});return-1!=b?this.a.i[b][this.a.A]:this.a.o?this.b.value:null}},data:{configurable:!0,enumerable:!0,set:function(a){this.a.i=a;this.a.K!=this.a.f&&(this.a.u=!1)}},
input:{configurable:!0,enumerable:!0,get:function(){return this.b}},cpl:{configurable:!0,enumerable:!0,get:function(){return this.g}}});r("AutoComplete",t);t.prototype.setOptions=t.prototype.m;function w(a,b){t.call(this,a,b);this.j.classList.add("ac-label");this.labels=[];this.H=[];this.s=document.createElement("div");this.s.classList.add("ac-labels");this.j.insertBefore(this.s,this.b)}w.prototype=f(t.prototype);w.prototype.constructor=w;if(p)p(w,t);else for(var x in t)if("prototype"!=x)if(Object.defineProperties){var y=Object.getOwnPropertyDescriptor(t,x);y&&Object.defineProperty(w,x,y)}else w[x]=t[x];
function z(a,b,c){c=void 0===c?!0:c;var d=document.createElement("div");d.innerHTML=b[a.a.f];a.s.appendChild(d);a.labels.push(b);a.H.push(d);d.addEventListener("click",function(){A(a,b);a.b.focus()});c&&a.a.I(b,a.labels,!0);a.b.focus()}function A(a,b,c){c=void 0===c?!0:c;b=a.findIndex(b[a.a.f]);a.s.removeChild(a.H.splice(b,1)[0]);b=a.labels.splice(b,1)[0];c&&a.a.I(b,a.labels,!1)}
w.prototype.v=function(a){t.prototype.v.call(this,a);a=a.target.getAttribute("data-value");var b=this.a.i[a];a=this.findIndex(b[this.a.f]);-1==a&&z(this,b);this.b.value=this.c=""};
w.prototype.D=function(a){t.prototype.D.call(this,a);8==a.keyCode&&!this.c.length&&this.labels.length&&(a.preventDefault(),this.c=this.b.value=this.labels.slice(-1)[0][this.a.f],A(this,this.labels.slice(-1)[0]));13==a.keyCode&&this.a.o&&this.c.length>=this.a.C&&-1==this.findIndex(this.c)&&(a={},z(this,(a[this.a.f]=this.c,a)),this.b.value=this.c="")};w.prototype.findIndex=function(a){var b=this;return this.labels.findIndex(function(c){return c[b.a.f].toLowerCase()==a.toLowerCase()})};
w.prototype.m=function(a){return Object.assign({},t.prototype.m.call(this,a),{I:a.onLabel||function(){}})};h.Object.defineProperties(w.prototype,{value:{configurable:!0,enumerable:!0,get:function(){return this.labels},set:function(a){for(var b=this;this.labels.length;)A(this,this.labels[0],!1);"string"===typeof a[0]&&(a=a.map(function(c){var d={};return d[b.a.f]=c,d}));a.filter(function(c){return-1==b.findIndex(c[b.a.f])}).forEach(function(c){return z(b,c,!1)})}}});r("AutoCompleteLabel",w);
w.prototype.setOptions=w.prototype.m;}).call(this);
